<!DOCTYPE html>
<html>
<head>
  <title>Register - EthioShop</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    body {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
    }
    .register-container {
      max-width: 450px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .register-header {
      background: #343a40;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .register-body {
      padding: 30px;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="register-container">
    <div class="register-header">
      <h3><i class="bi bi-shop me-2"></i>EthioShop</h3>
      <p class="mb-0">Create your account</p>
    </div>
    
    <div class="register-body">
      <div class="mb-3">
        <label for="fullName" class="form-label">Full Name</label>
        <input type="text" id="fullName" class="form-control" placeholder="Enter your full name">
      </div>
      
      <div class="mb-3">
        <label for="email" class="form-label">Email Address</label>
        <input type="email" id="email" class="form-control" placeholder="Enter your email">
      </div>
      
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" id="password" class="form-control" placeholder="Create a password">
      </div>
      
      <div class="mb-3">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your password">
      </div>
      
      <div class="mb-3">
        <label for="phone" class="form-label">Phone Number</label>
        <input type="tel" id="phone" class="form-control" placeholder="+251 ___ ___ ___">
      </div>
      
      <div class="mb-3">
        <label for="address" class="form-label">Address</label>
        <textarea id="address" class="form-control" placeholder="Enter your address" rows="2"></textarea>
      </div>
      
      <div class="mb-3">
        <label for="role" class="form-label">Account Type</label>
        <select id="role" class="form-control">
          <option value="buyer">Buyer (I want to shop)</option>
          <option value="seller">Seller (I want to sell products)</option>
        </select>
      </div>
      
      <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="terms">
        <label class="form-check-label" for="terms">
          I agree to the <a href="privacy.html" class="text-decoration-none">Terms & Conditions</a>
        </label>
      </div>
      
      <button onclick="register()" class="btn btn-dark w-100 mb-3">
        <i class="bi bi-person-plus me-2"></i> Create Account
      </button>
      
      <div class="text-center">
        <a href="login.html" class="text-decoration-none">Already have an account? Login</a>
      </div>
    </div>
  </div>
</div>

<script src="js/data.js"></script>
<script src="js/auth.js"></script>
<script>
function register() {
  const fullName = document.getElementById('fullName').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const confirmPassword = document.getElementById('confirmPassword').value;
  const phone = document.getElementById('phone').value;
  const address = document.getElementById('address').value;
  const role = document.getElementById('role').value;
  const terms = document.getElementById('terms').checked;
  
  // Validation
  if (!fullName || !email || !password || !confirmPassword) {
    alert('Please fill in all required fields');
    return;
  }
  
  if (password !== confirmPassword) {
    alert('Passwords do not match');
    return;
  }
  
  if (!terms) {
    alert('You must agree to the Terms & Conditions');
    return;
  }
  
  let users = JSON.parse(localStorage.getItem("users"));
  
  // Check if user already exists
  if (users.some(u => u.email === email)) {
    alert('User with this email already exists');
    return;
  }
  
  // Create new user object
  const newUser = {
    name: fullName,
    email: email,
    password: password,
    role: role,
    phone: phone,
    address: address,
    registered: '2026-03-25',
    status: 'active'
  };
  
  users.push(newUser);
  localStorage.setItem("users", JSON.stringify(users));
  
  // Add to recent activities for admin
  let activities = JSON.parse(localStorage.getItem("recentActivities")) || [];
  activities.unshift({
    id: Date.now(),
    type: "user_registered",
    message: `New ${role} registered: ${fullName} (${email})`,
    timestamp: new Date().toISOString()
  });
  localStorage.setItem("recentActivities", JSON.stringify(activities));
  
  alert("Registration successful! Please login.");
  window.location.href = "login.html";
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>